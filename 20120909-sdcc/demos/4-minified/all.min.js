(function(){var g,j,h=function(b){return"[object Array]"===Object.prototype.toString.call(b)},m=function(b,a,c){if(h(b)){for(var c=Array(b.length),d=0,e=b.length;d<e;d++)c[d]=a(b[d]);return c}d=c?a:null;c=c||a;a={};for(e in b)if(b.hasOwnProperty(e)){var f=b[e],i=d?d(e):e,f=c?c(f):f;a[i]=f}return a},k=function(b){for(var a=0,b=b.split("."),c=0;3>c;c++)a*=100,c<b.length&&(a+=parseInt(b[c],10));return a},l=function(b,a){if(!h(a)){for(var c=Array(arguments.length-1),d=1;d<arguments.length;d++)c[d-1]=
arguments[d];return l(b,c)}return b.replace(/\{{1,2}\d+\}{1,2}/g,function(b){if(0==b.indexOf("{{")&&b.indexOf("}}")==b.length-2)return b.substring(1,b.length-1);for(var c=0;"{"==b[c];)c++;for(var d=b.length-1;"}"==b[d];)d--;c=parseInt(b.substring(c,d+1),10);return b.replace("{"+c+"}",a[c])})};j={isArray:h,each:function(b,a){if(h(b))for(var c=0,d=b.length;c<d;c++){var e=1===a.length?a(b[c]):a(c,b[c]);if(void 0!==e)return e}else for(c in b)if(b.hasOwnProperty(c)&&(e=1===a.length?a(b[c]):a(c,b[c]),void 0!==
e))return e},isEmpty:function(b){return h(b)?0===b.length:!j.each(b,function(){return!0})},map:m,clone:function(b){return m(b)},v2n:k,testVersion:function(b,a){var c=b.substring(1),d=c.split(".");d[d.length-1]="0";d[d.length-2]=(parseInt(d[d.length-2],10)+1).toString();var d=d.join("."),e=k(a);return k(c)<=e&&e<k(d)},format:l,once:function(b){var a=!1;return function(){a||(b.apply(this,arguments),a=!0)}}};var i={ALL:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,OFF:100},n=function(){this.level=i.DEBUG};
n.prototype={log:function(b,a){if(this.level<=b)try{console.log(a)}catch(c){}},trace:function(b){this.log(i.TRACE,b)},debug:function(b){this.log(i.DEBUG,b)},info:function(b){this.log(i.INFO,b)},warn:function(b){this.log(i.WARN,b)},error:function(b){this.log(i.ERROR,b)}};var c=function(b){var a=g.modules[b.name];a&&a.version!=b.version&&g.logger.warn(j.format('The module "{0}" with version "{1}" has already been initialized, skip version "{2}".',b.name,a.version,b.version));j.each(b.dependencies||
[],function(a,b){var c=g.modules[a];if(!c)throw Error(j.format('Missing required module: "{0}" (expected version: "{1}").',a,b));if(!j.testVersion(b,c.version))throw Error(j.format('Version of module "{0}" mismatched, expected: "{1}", actual: "{2}".',a,b,c.version));});b.init();a={};a.name=b.name;a.version=b.version;b.autoloads&&(a.autoloads=b.autoloads);b.dependencies&&(a.dependencies=b.dependencies);g.modules[b.name]=a},a=!!("function"===typeof require&&"undefined"!==typeof module&&module.exports),
d=!!("function"===typeof require&&"function"===typeof define&&define.amd),f=function(b){var e=b.autoloads||[];if(a){var f=b.require;j.each(e,function(a){try{f("./wind-"+a)}catch(b){f("wind-"+a)}});c(b)}else d?(e=j.map(e,function(a){return"wind-"+a}),define("wind-"+b.name,e,function(){if(b.onerror)try{c(b)}catch(a){b.onerror(a)}else c(b)})):c(b)},e=function(){g.logger=new n;g.Logging={Logger:n,Level:i};g._=j;g.modules={core:{name:"core",version:"0.7.0"}};g.binders={};g.builders={};g.define=f};if(a)g=
module.exports,e();else if(d)define("wind-core",function(){g={};e();return g});else{var o=Function("return this")();if(o.Wind)throw Error("There's already a Wind root here, please load the component only once.");g=o.Wind={};e()}})();(function(){var g=function(){};g.prototype={For:function(i,g,c){return{next:function(a,d){var f=function(e){try{g&&!e&&g.call(a),!i||i.call(a)?c.next(a,function(a,c){if("normal"==a||"continue"==a)f(!1);else if("throw"==a||"return"==a)d(a,c);else if("break"==a)d("normal");else throw Error('Invalid type for "Loop": '+a);}):d("normal")}catch(o){d("throw",o)}};f(!0)}}},ForIn:function(i,g){return{next:function(c,a){var d=[],f;for(f in i)d.push(f);var e=function(f){try{f<d.length?g(d[f]).next(c,function(b,
c){if("normal"==b||"continue"==b)e(f+1);else if("throw"==b||"return"==b)a(b,c);else if("break"==b)a("normal");else throw Error('Invalid type for "Loop": '+b);}):a("normal")}catch(b){a("throw",b)}};e(0)}}},While:function(i,g){return{next:function(c,a){var d=function(){try{i.call(c)?g.next(c,function(c,f){if("normal"==c||"continue"==c)d();else if("throw"==c||"return"==c)a(c,f);else if("break"==c)a("normal");else throw Error('Invalid type for "Loop": '+c);}):a("normal")}catch(f){a("throw",f)}};d()}}},
Do:function(i,g){return{next:function(c,a){var d=function(){i.next(c,function(f,e){if("normal"==f||"continue"==f)try{g.call(c)?d():a("normal")}catch(i){a("throw",i)}else if("throw"==f||"return"==f)a(f,e);else if("break"==f)a("normal");else throw Error('Invalid type for "Loop": '+f);})};d()}}},Delay:function(i){return{next:function(g,c){try{i.call(g).next(g,c)}catch(a){c("throw",a)}}}},Combine:function(g,h){return{next:function(c,a){g.next(c,function(d,f,e){if("normal"==d)try{h.next(c,a)}catch(g){a("throw",
g)}else a(d,f,e)})}}},Return:function(g){return{next:function(h,c){c("return",g)}}},Normal:function(){return{next:function(g,h){h("normal")}}},Break:function(){return{next:function(g,h){h("break")}}},Continue:function(){return{next:function(g,h){h("continue")}}},Throw:function(g){return{next:function(h,c){c("throw",g)}}},Try:function(g,h,c){return{next:function(a,d){g.next(a,function(f,e,g){if("throw"!=f||!h)c?c.next(a,function(a,b,c){"normal"==a?d(f,e,g):d(a,b,c)}):d(f,e,g);else if(h){var b;try{b=
h.call(a,e)}catch(i){c?c.next(a,function(a,b,c){"normal"==a?d("throw",i):d(a,b,c)}):d("throw",i)}b&&b.next(a,function(b,e,f){c?c.next(a,function(a,c,g){"normal"==a?d(b,e,f):d(a,c,g)}):d(b,e,f)})}else c.next(a,function(a,b,c){"normal"==a?d(f,e,g):d(a,b,c)})})}}}};var j=!!("function"===typeof require&&"undefined"!==typeof module&&module.exports),h=!!("function"===typeof require&&"function"===typeof define&&define.amd),m,k=function(){m.define({name:"builderbase",version:"0.7.0",require:j&&require,dependencies:{core:"~0.7.0"},
init:function(){m.BuilderBase=g}})};if(j){try{m=require("./wind-core")}catch(l){m=require("wind-core")}k()}else if(h)require(["wind-core"],function(g){m=g;k()});else{h=Function("return this")();if(!h.Wind)throw Error('Missing the root object, please load "wind" component first.');m=h.Wind;k()}})();(function(){var g;var j=0,h={};try{Object.defineProperty(h,"value",{get:function(){if(0===j)throw Error("Execute too soon.");return j}}),j=1,g=1===h.value}catch(m){g=!1}var k,l,i={},n=function(a){return"670a1076-712b-4edd-9b70-64b152fe1cd9"==a._typeId},c=i.CanceledError=function(){};c.prototype={isTypeOf:n,_typeId:"670a1076-712b-4edd-9b70-64b152fe1cd9",message:"The task has been cancelled."};var a=i.AggregateError=function(a){this.children=[];if(a)for(var b=0;b<a.length;b++)this.children.push(a[b])};
a.prototype={_typeId:"4a73efb8-c2e2-4305-a05c-72385288650a",message:"This is an error contains sub-errors, please check the 'children' collection for more details.",isTypeOf:function(a){return"4a73efb8-c2e2-4305-a05c-72385288650a"==a._typeId}};(i.CancellationToken=function(){}).prototype={register:function(a){this.isCancellationRequested&&a();this._handlers||(this._handlers=[]);this._handlers.push(a)},unregister:function(a){this._handlers&&(a=this._handlers.indexOf(a),0<=a&&this._handlers.splice(a,
1))},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var a=this._handlers;delete this._handlers;for(var b=0;b<a.length;b++)try{a[b]()}catch(c){k.logger.warn("Cancellation handler threw an error: "+c)}}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new c;}};var d=function(){this._listeners={};this._firing=null};d.prototype={add:function(a,b){if(this._firing===a){var c=this;setTimeout(function(){c.add(a,b)},0)}else{var d=this._listeners[a];
d||(d=this._listeners[a]=[]);d.push(b)}},remove:function(a,b){if(this._firing===a){var c=this;setTimeout(function(){c.remove(a,b)},0)}else{var d=this._listeners[a];if(d){var e=d.indexOf(b);0<=e&&d.splice(e,1)}}},fire:function(a,b,c){var d=this._listeners[a];if(d){this._firing=a;for(var e=0;e<d.length;e++)try{d[e].call(b,c)}catch(f){k.logger.warn('An error occurred in "'+a+' listener": '+f)}this._firing=null}}};var f=new d,e=i.Task=function(a){this._delegate=a;this._eventManager=new d;this.status=
"ready"};e.prototype={start:function(){if("ready"!=this.status)throw Error('Task can only be started in "ready" status.');this.status="running";try{this._delegate(this)}catch(a){"running"==this.status?this.complete("failure",a):k.logger.warn("An unexpected error occurred after the task is completed: "+a)}return this},complete:function(a,b){if("success"!==a&&"failure"!==a)throw Error("Unsupported type: "+a);if("running"!=this.status)throw Error('The "complete" method can only be called in "running" status.');
var c=this._eventManager;this._eventManager=null;"success"===a?(this.status="succeeded",g?this._result=b:this.result=b,c.fire("success",this)):(this.status=n(b)?"canceled":"faulted",g?this._error=b:this.error=b,c.fire("failure",this));c.fire("complete",this);if("failure"===a&&g&&!this._errorObserved){var d=this;this._unobservedTimeoutToken=setTimeout(function(){d._handleUnobservedError(b)},e.unobservedTimeout)}},observeError:function(){if("ready"===this.status||"running"===this.status)throw Error("The method could only be called when it's completed.");
if(!g)return this.error;var a=this._unobservedTimeoutToken;a&&(clearTimeout(a),this._unobservedTimeoutToken=null);this._errorObserved=!0;return this._error},_handleUnobservedError:function(a){this._unobservedTimeoutToken=null;var b={task:this,error:a,observed:!1};f.fire("unobservedError",e,b);if(!b.observed)throw a;},then:function(a){var b=this;return e.create(function(c){var d=function(){this.error?c.complete("failure",this.error):c.complete("success",this.result)},e=function(){if(this.error)return c.complete("failure",
this.error);var b;try{b=a(this.result)}catch(e){return c.complete("failure",e)}"ready"==b.status&&b.start();if("running"==b.status)b.on("complete",d);else d.call(b)};"ready"==b.status&&b.start();if("running"==b.status)b.on("complete",e);else e.call(b)})}};e.prototype.on=e.prototype.addEventListener=function(){var a=this._eventManager;if(!a)throw Error("Cannot add event listeners when the task is complete.");a.add.apply(a,arguments);return this};e.prototype.off=e.prototype.removeEventListener=function(){var a=
this._eventManager;if(!a)throw Error("All the event listeners have been removed when the task was complete.");a.remove.apply(a,arguments);return this};g&&(Object.defineProperty(e.prototype,"error",{get:function(){return this.observeError()}}),Object.defineProperty(e.prototype,"result",{get:function(){var a=this.observeError();if(a)throw a;return this._result}}));var o=function(){this.observeError()};e.on=e.addEventListener=function(){f.add.apply(f,arguments)};e.off=e.removeEventListener=function(a,
b){f.remove.apply(f,arguments)};e.unobservedTimeout=1E4;var b=e.isTask=function(a){return a&&typeof a.start==="function"&&typeof a.addEventListener==="function"&&typeof a.removeEventListener==="function"&&typeof a.complete==="function"},r=e.create=function(a){return new e(a)},v=e.whenAll=function(){var c;if(arguments.length==1){var d=arguments[0];c=b(d)?[d]:d}else{c=Array(arguments.length);for(d=0;d<arguments.length;d++)c[d]=arguments[d]}return r(function(d){var e,f=function(){if(e)d.complete("failure",
new a(e));else{var b=l.map(c,function(a){return a.result});d.complete("success",b)}},g=0;l.each(c,function(a,d){if(d){b(d)||(c[a]=d=v(d));d.status==="ready"&&d.start();if(d.status==="running"){g++;d.addEventListener("complete",function(){if(this.status!=="succeeded"){e||(e=[]);e.push(this.error)}--g==0&&f()})}else if(d.status==="faulted"||d.status==="canceled"){e||(e=[]);e.push(d.error)}}});g==0&&f()})};e.whenAny=function(){var a={},c=true;if(arguments.length==1){var d=arguments[0];if(b(d))a[0]=d;
else{c=l.isArray(d);l.each(d,function(c,d){b(d)&&(a[c]=d)})}}else for(d=0;d<arguments.length;d++){var e=arguments[d];b(e)&&(a[d]=e)}var f=c?function(a){return parseInt(a,10)}:function(a){return a};return r(function(b){if(l.isEmpty(a))return b.complete("failure","There's no valid input tasks.");var c;l.each(a,function(a,b){b.status==="ready"&&b.start();if(b.status!=="running"){b.observeError();c||(c={key:f(a),task:b})}});if(c){l.each(a,function(a,b){if(b.status==="running")b.on("failure",o)});return b.complete("success",
c)}var d=function(){this.observeError();var c=this,e;l.each(a,function(a,b){if(c===b)e=a;else{b.off("complete",d);b.on("failure",o)}});b.complete("success",{key:f(e),task:this})};l.each(a,function(a){a.addEventListener("complete",d)})})};i.sleep=function(a,b){return e.create(function(d){b&&b.isCancellationRequested&&d.complete("failure",new c);var e,f;b&&(f=function(){clearTimeout(e);d.complete("failure",new c)});e=setTimeout(function(){b&&b.unregister(f);d.complete("success")},a);b&&b.register(f)})};
i.onEvent=function(a,b,d){return e.create(function(e){d&&d.isCancellationRequested&&e.complete("failure",new c);var f=function(){a.removeEventListener?a.removeEventListener(b,g):a.removeListener?a.removeListener(b,g):a.detachEvent(b,g)},g,h;d&&(h=function(){f();e.complete("failure",new c)});g=function(a){d&&d.unregister(h);f();e.complete("success",a)};a.addEventListener?a.addEventListener(b,g):a.addListener?a.addListener(b,g):a.attachEvent(b,g);d&&d.register(h)})};var p=i.AsyncBuilder=function(){};
p.prototype={Start:function(a,b){return e.create(function(c){b.next(a,function(a,b){if(a=="normal"||a=="return")c.complete("success",b);else if(a=="throw")c.complete("failure",b);else throw Error("Unsupported type: "+a);})})},Bind:function(a,b){return{next:function(c,d){var e=function(){if(this.error)d("throw",this.error);else{var a;try{a=b.call(c,this.result)}catch(e){d("throw",e);return}a.next(c,d)}};if(a.status=="ready"){a.addEventListener("complete",e);a.start()}else a.status=="running"?a.addEventListener("complete",
e):e(a)}}}};var h=i.Binding={},s=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);for(;c.length<b;)c.push(void 0);return c},t=function(a){if(a.length<=1)return null;for(var b=[],c=1;c<a.length;c++)b.push(a[c]);return b};h.fromStandard=function(a){var b=t(arguments);return function(){var c=this,d=s(arguments,a.length-1);return e.create(function(e){d.push(function(a,c){if(a)e.complete("failure",a);else{if(b){for(var d={},f=0;f<b.length;f++)d[b[f]]=arguments[f+1];return e.complete("success",
d)}e.complete("success",c)}});a.apply(c,d)})}};h.fromCallback=function(a){var b=t(arguments);return function(){var c=this,d=s(arguments,a.length-1);return e.create(function(e){d.push(function(a){if(b){for(var c={},d=0;d<b.length;d++)c[b[d]]=arguments[d];e.complete("success",c)}else e.complete("success",a)});a.apply(c,d)})}};var u=!!("function"===typeof require&&"undefined"!==typeof module&&module.exports),h=!!("function"===typeof require&&"function"===typeof define&&define.amd),q=function(){k.define({name:"async",
version:"0.7.0",require:u&&require,autoloads:["builderbase"],dependencies:{builderbase:"~0.7.0"},init:function(){l=k._;l.each(k.BuilderBase.prototype,function(a,b){p.prototype[a]=b});k.Async=i;k.binders.async="$await";k.builders.async=new p}})};if(u){try{k=require("./wind-core")}catch(w){k=require("wind-core")}q()}else if(h)require(["wind-core"],function(a){k=a;q()});else{h=Function("return this")();if(!h.Wind)throw Error('Missing the root object, please load "wind" component first.');k=h.Wind;q()}})();var SortingAnimations;
SortingAnimations=function(g){var j=g.getContext?g.getContext("2d"):null,h=function(c,a){j.clearRect(0,0,g.width,g.height);j.lineWidth=9;for(var d=0;d<c.length;d++){var f=10*d+4.5,e=10*c[d]*g.height/g.width;j.beginPath();j.strokeStyle=a&&0<=a.indexOf(d)?"red":"black";j.moveTo(f,g.height);j.lineTo(f,g.height-e);j.stroke()}},m=function(c,a){var d=Wind.builders.async;return d.Start(this,d.Delay(function(){return d.Bind(Wind.Async.sleep(30),function(){return d.Return(c-a)})}))},k=function(c,a,d){var f=
Wind.builders.async;return f.Start(this,f.Delay(function(){var e=c[a];c[a]=c[d];c[d]=e;h(c,[a,d]);return f.Bind(Wind.Async.sleep(50),function(){return f.Normal()})}))},l=function(c,a,d,f){var e=Wind.builders.async;return e.Start(this,e.Delay(function(){c[a]=d;h(c,f);return e.Bind(Wind.Async.sleep(50),function(){return e.Normal()})}))},i={Bubble:function(c){var a=Wind.builders.async;return a.Start(this,a.Delay(function(){var d=0;return a.For(function(){return d<c.length},function(){d++},a.Delay(function(){var f=
0;return a.For(function(){return f<c.length-d-1},function(){f++},a.Delay(function(){return a.Bind(m(c[f],c[f+1]),function(d){return 0<d?a.Bind(k(c,f,f+1),function(){return a.Normal()}):a.Normal()})}))}))}))},Quick:function(c){var a=Wind.builders.async;return a.Start(this,a.Delay(function(){var d=function(a,d){var b=Wind.builders.async;return b.Start(this,b.Delay(function(){var f=a,g=d,h=c[Math.floor((a+d)/2)];return b.Combine(b.While(function(){return f<=g},b.Combine(b.While(function(){return!0},
b.Delay(function(){return b.Bind(m(c[f],h),function(a){if(0>a)f++;else return b.Break();return b.Normal()})})),b.Combine(b.While(function(){return!0},b.Delay(function(){return b.Bind(m(c[g],h),function(a){if(0<a)g--;else return b.Break();return b.Normal()})})),b.Delay(function(){return f<=g?b.Bind(k(c,f,g),function(){f++;g--;return b.Normal()}):b.Normal()})))),b.Delay(function(){return b.Return(f)}))}))},f=function(a,c){var b=Wind.builders.async;return b.Start(this,b.Delay(function(){return b.Bind(d(a,
c),function(d){return b.Combine(b.Delay(function(){return a<d-1?b.Bind(f(a,d-1),function(){return b.Normal()}):b.Normal()}),b.Delay(function(){return d<c?b.Bind(f(d,c),function(){return b.Normal()}):b.Normal()}))})}))};return a.Bind(f(0,c.length-1),function(){return a.Normal()})}))},Selection:function(c){var a=Wind.builders.async;return a.Start(this,a.Delay(function(){var d=0;return a.For(function(){return d<c.length-1},function(){d++},a.Delay(function(){var f=d;return a.Combine(a.Delay(function(){var e=
d+1;return a.For(function(){return e<c.length},function(){e++},a.Delay(function(){return a.Bind(m(c[e],c[f]),function(c){0>c&&(f=e);return a.Normal()})}))}),a.Delay(function(){return a.Bind(k(c,f,d),function(){return a.Normal()})}))}))}))},Shell:function(c){var a=Wind.builders.async;return a.Start(this,a.Delay(function(){var d=Math.floor(c.length/2);return a.For(function(){return 0<d},function(){d=Math.floor(d/2)},a.Delay(function(){var f=d;return a.For(function(){return f<c.length},function(){f++},
a.Delay(function(){var e=c[f],g;return a.Combine(a.Delay(function(){g=f;return a.For(function(){return g>=d},function(){g-=d},a.Delay(function(){return a.Bind(m(e,c[g-d]),function(b){return 0>b?a.Bind(l(c,g,c[g-d]),function(){return a.Normal()}):a.Break()})}))}),a.Delay(function(){return a.Bind(l(c,g,e,[g]),function(){return a.Normal()})}))}))}))}))}};this.supported=!!j;this.randomArray=function(){for(var c=[],a=Math.floor(g.width/10),d=1;d<=a;d++)c.push(d);c.sort(function(){return Math.round(Math.random())-
0.5});return c};this.paint=h;this.names=[];for(var n in i)this.names.push(n);this.sortAsync=function(c,a){var d=Wind.builders.async;return d.Start(this,d.Delay(function(){h(a);return d.Bind(i[c](a),function(){h(a);return d.Normal()})}))}};
//@ sourceMappingURL=all.min.js.map